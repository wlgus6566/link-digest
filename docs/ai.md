# 🤖 AI 기능 연동 (상세 설계)

### 🎯 목적

단순 텍스트 요약이 아닌, **영상/이미지 콘텐츠를 시각적이고 문맥 있는 블로그 포맷**으로 자동 재구성하는 것이 핵심.

이를 위해 텍스트 요약 + 이미지 프레임 캡처를 결합하여, 사용자가 콘텐츠를 **“읽고 감상할 수 있는 콘텐츠”**로 재생산.

---

### 🧠 AI 요약 시스템

| 항목      | 설명                                                      |
| --------- | --------------------------------------------------------- |
| 요약 대상 | 유튜브 영상 자막 (.srt 또는 transcript) / 인스타그램 캡션 |
| API 사용  | OpenAI GPT-4 Turbo 또는 Claude 3 (요약 및 블로그화)       |
| 입력 포맷 | 텍스트 기반 (타이틀, 자막, 설명 등)                       |
| 출력 포맷 | HTML or Markdown 블록 (블로그 스타일 포맷)                |
| 요약 구성 |                                                           |

- 도입부 (요약 소개)
- 핵심 요점 (3~5개 항목, 리스트 또는 단락)
- 정리/인사이트 문단
- 태그 추천 리스트 |

> 요약 결과물은 포맷 일관성을 위해 템플릿 가이드라인 제공 예정

---

### 🖼️ 이미지/영상 프레임 자동 추출

**1. 유튜브 썸네일 추출**

- YouTube Data API v3 사용
- 고화질 썸네일 (default / maxres) 우선 활용
- 실패 시 360p 화질로 fallback

**2. 주요 장면 프레임 캡처 (자동화)**

- 프레임 추출 도구:
  - FFmpeg (서버에서 실행) 또는 Replicate API (비디오 분석 모델 활용)
- 추출 로직:
  - 영상 길이에 따라 2~3개의 주요 프레임 자동 추출 (예: 25%, 50%, 75% 지점)
  - 얼굴 인식, 객체 인식 등으로 **시각적으로 의미 있는 장면 우선순위 적용 가능**
- 캡처 프레임은 Supabase Storage에 저장 후 콘텐츠 카드에 삽입

**3. 인스타그램 이미지 수집**

- Open Graph (`og:image`) 메타태그 기반 대표 이미지 추출
- Carousel 형식일 경우 여러 이미지 수집 가능 (1~3장)

---

### ✨ 콘텐츠 구성 예시 (최종 출력 형태)

\`\`\`json
{
"id": "1",
"title": "하루 10분, 당신의 뇌를 바꾸는 심리학",
"source": "YouTube",
"sourceUrl": "https://youtube.com/watch?v=example",
"date": "2025년 4월 12일",
"author": {
"name": "심리연구소 OOO",
"role": "심리학자",
"avatar": "/avatar-psy.svg"
},
"readTime": "3분 소요",
"tags": ["심리학", "자기계발", "브레인헬스"],
"image": "/brain-thumbnail.jpg", // 대표 이미지
"summary": "이 영상은 일상 속 작은 습관이 우리의 뇌를 어떻게 변화시키는지를 설명합니다. 심리학적 실험과 실제 사례를 바탕으로 뇌의 유연성과 반복 학습의 중요성을 강조합니다.",
"content": `
<h2 id="intro">뇌는 어떻게 바뀌는가?</h2>
<p>우리의 뇌는 반복되는 정보에 적응하고, 자주 사용하는 경로를 강화합니다. 영상에서는 '신경가소성'이라는 개념을 통해, 습관이 뇌 구조에 미치는 영향을 소개합니다.</p>

    <figure>
      <img src="/neuroplasticity-graph.jpg" alt="신경가소성 시각화 이미지" />
      <figcaption>신경가소성은 뇌가 반복된 경험을 통해 구조를 변화시키는 능력을 의미합니다.</figcaption>
    </figure>

    <h3 id="key-points">핵심 요점</h3>
    <ul>
      <li>뇌는 반복 학습을 통해 정보를 더욱 쉽게 받아들입니다.</li>
      <li>작은 변화의 누적이 뇌 구조에 장기적인 영향을 줍니다.</li>
      <li>시각적 자극은 감정과 기억을 동시에 자극합니다.</li>
    </ul>

    <figure>
      <img src="/experiment-shot1.jpg" alt="심리 실험 장면" />
      <figcaption>감정 변화와 뇌파 반응을 분석한 실험 장면</figcaption>
    </figure>

    <h2 id="insight">나의 인사이트 💡</h2>
    <p>이 강연은 단순 정보 전달이 아니라, 우리가 일상 속에서 어떤 행동을 취할지를 구체적으로 안내해줍니다. 매일 10분의 학습 루틴은 생각보다 큰 차이를 만들 수 있습니다.</p>

    <blockquote>
      <p>"습관은 작은 결정의 연속이지만, 뇌는 그것을 장기적 변화로 인식한다."</p>
      <cite>- 영상 중 발언</cite>
    </blockquote>

    <h2 id="summary">요약</h2>
    <p>뇌는 변화할 수 있습니다. 그리고 그 변화는 일상에서의 반복을 통해 시작됩니다. 영상은 과학적 설명뿐 아니라 실용적인 행동 가이드를 제시하여, 시청자들이 당장 실천할 수 있는 지침을 제공합니다.</p>

`,
  "relatedPosts": [
    {
      "id": 2,
      "title": "습관이 뇌를 바꾼다: 뇌과학 기반 루틴 만들기",
      "image": "/habit-brain.jpg"
    },
    {
      "id": 3,
      "title": "감정과 학습의 관계: 뇌는 왜 시각에 반응하는가?",
      "image": "/emotion-learning.jpg"
    },
    {
      "id": 4,
      "title": "하루 10분 루틴이 만드는 심리적 변화",
      "image": "/daily-routine.jpg"
    }
  ]
}
\`\`\`

---

### 🔁 처리 순서 요약 (데이터 흐름)

1. 사용자: 유튜브/인스타그램 링크 입력
2. 백엔드:
   - 영상/포스트에서 텍스트 + 이미지 데이터 수집
   - 영상이면: 자막 수집 + 썸네일 + 프레임 캡처
   - 인스타면: 캡션 + 대표 이미지 추출
3. AI 호출:
   - 수집한 텍스트를 OpenAI 또는 Claude로 요약 요청
   - 출력: HTML or Markdown (블로그 스타일)
4. 저장:
   - 요약 텍스트, 이미지 URL, 태그 등 DB에 저장
5. 프론트엔드:
   - 카드형 썸네일 → 블로그 콘텐츠 보기 페이지 렌더링

---

### ✅ 연동 API/라이브러리 정리

| 목적             | 도구/서비스                                            |
| ---------------- | ------------------------------------------------------ |
| 유튜브 자막 추출 | youtube-transcript-api (Node.js / Python)              |
| 썸네일           | YouTube Data API                                       |
| 영상 프레임 추출 | FFmpeg, Replicate API (video-to-image, SAM 등)         |
| 이미지 저장      | Supabase Storage                                       |
| AI 요약          | OpenAI GPT-4 Turbo / Claude 3 API                      |
| 블로그 UI 렌더링 | Next.js + MDX / HTML parser + Tailwind 스타일 컴포넌트 |
